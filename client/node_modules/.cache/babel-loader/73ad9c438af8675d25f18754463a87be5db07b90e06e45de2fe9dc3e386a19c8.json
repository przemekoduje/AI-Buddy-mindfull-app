{"ast":null,"code":"var _jsxFileName = \"/Users/przemyslawrakotny/Documents/przemokoduje/full_projects/ai-buddy-mindfull-app/client/src/screens/PerspectiveShiftScreen.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './PerspectiveShiftScreen.scss';\nimport ShatterAnimation from '../components/ShatterAnimation';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PerspectiveShiftScreen = () => {\n  _s();\n  const [step, setStep] = useState('inputNegative');\n  const [negativeThought, setNegativeThought] = useState('');\n  const [positiveThought, setPositiveThought] = useState('');\n  const [reframingQuestion, setReframingQuestion] = useState('');\n  const [aiConclusion, setAiConclusion] = useState('');\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const handleNegativeSubmit = async e => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    setIsLoading(true);\n    setNegativeThought(input);\n    try {\n      const response = await fetch('http://localhost:5001/api/get-reframing-question', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          thought: input\n        })\n      });\n      const data = await response.json();\n      setReframingQuestion(data.question);\n      setInput('');\n      setStep('inputPositive');\n    } catch (error) {\n      console.error(\"Błąd serwera:\", error);\n      setReframingQuestion(\"Jak inaczej można spojrzeć na tę sytuację?\");\n      setInput('');\n      setStep('inputPositive');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handlePositiveSubmit = async e => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    setPositiveThought(input);\n    setIsLoading(true);\n    try {\n      const response = await fetch('http://localhost:5001/api/get-conclusion', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          negative_thought: negativeThought,\n          reframed_thought: input\n        })\n      });\n      const data = await response.json();\n      setAiConclusion(data.conclusion);\n      setStep('showConclusion');\n    } catch (error) {\n      console.error(\"Błąd przy pobieraniu wniosku:\", error);\n      setAiConclusion(\"Dobra robota! Twoja nowa perspektywa jest krokiem w dobrą stronę.\");\n      setStep('showConclusion');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (step === 'showConclusion') {\n      const timer = setTimeout(() => {\n        setStep('animating');\n      }, 5000); // Pokaż wniosek przez 5 sekund\n      return () => clearTimeout(timer);\n    }\n  }, [step]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"perspective-screen\",\n    children: [step === 'inputNegative' && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleNegativeSubmit,\n      className: \"thought-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Jaka my\\u015Bl Ci teraz ci\\u0105\\u017Cy?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        placeholder: \"Wpisz tutaj swoj\\u0105 my\\u015Bl...\",\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: isLoading || !input.trim(),\n        children: isLoading ? 'Analizuję...' : 'Dalej'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), step === 'inputPositive' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-sphere\",\n        children: negativeThought\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handlePositiveSubmit,\n        className: \"thought-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: reframingQuestion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: input,\n          onChange: e => setInput(e.target.value),\n          placeholder: \"Wpisz now\\u0105, bardziej pomocn\\u0105 my\\u015Bl...\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading || !input.trim(),\n          children: \"Przeformu\\u0142uj\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), step === 'showConclusion' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-conclusion\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\\"\", aiConclusion, \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), step === 'animating' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ShatterAnimation, {\n        text: negativeThought\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"positive-thought-reveal\",\n        children: positiveThought\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(PerspectiveShiftScreen, \"PPMcQCgCNTN6AxSKj/gzFrG6VVI=\");\n_c = PerspectiveShiftScreen;\nexport default PerspectiveShiftScreen;\nvar _c;\n$RefreshReg$(_c, \"PerspectiveShiftScreen\");","map":{"version":3,"names":["React","useState","useEffect","ShatterAnimation","jsxDEV","_jsxDEV","Fragment","_Fragment","PerspectiveShiftScreen","_s","step","setStep","negativeThought","setNegativeThought","positiveThought","setPositiveThought","reframingQuestion","setReframingQuestion","aiConclusion","setAiConclusion","input","setInput","isLoading","setIsLoading","handleNegativeSubmit","e","preventDefault","trim","response","fetch","method","headers","body","JSON","stringify","thought","data","json","question","error","console","handlePositiveSubmit","negative_thought","reframed_thought","conclusion","timer","setTimeout","clearTimeout","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","placeholder","autoFocus","type","disabled","text","_c","$RefreshReg$"],"sources":["/Users/przemyslawrakotny/Documents/przemokoduje/full_projects/ai-buddy-mindfull-app/client/src/screens/PerspectiveShiftScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './PerspectiveShiftScreen.scss';\nimport ShatterAnimation from '../components/ShatterAnimation';\n\nconst PerspectiveShiftScreen = () => {\n  const [step, setStep] = useState('inputNegative');\n  const [negativeThought, setNegativeThought] = useState('');\n  const [positiveThought, setPositiveThought] = useState('');\n  const [reframingQuestion, setReframingQuestion] = useState('');\n  const [aiConclusion, setAiConclusion] = useState('');\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleNegativeSubmit = async (e) => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    setIsLoading(true);\n    setNegativeThought(input);\n\n    try {\n      const response = await fetch('http://localhost:5001/api/get-reframing-question', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ thought: input }),\n      });\n      const data = await response.json();\n      setReframingQuestion(data.question);\n      setInput('');\n      setStep('inputPositive');\n    } catch (error) {\n      console.error(\"Błąd serwera:\", error);\n      setReframingQuestion(\"Jak inaczej można spojrzeć na tę sytuację?\");\n      setInput('');\n      setStep('inputPositive');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handlePositiveSubmit = async (e) => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    \n    setPositiveThought(input);\n    setIsLoading(true);\n\n    try {\n      const response = await fetch('http://localhost:5001/api/get-conclusion', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          negative_thought: negativeThought,\n          reframed_thought: input,\n        }),\n      });\n      const data = await response.json();\n      setAiConclusion(data.conclusion);\n      setStep('showConclusion');\n    } catch (error) {\n      console.error(\"Błąd przy pobieraniu wniosku:\", error);\n      setAiConclusion(\"Dobra robota! Twoja nowa perspektywa jest krokiem w dobrą stronę.\");\n      setStep('showConclusion');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (step === 'showConclusion') {\n      const timer = setTimeout(() => {\n        setStep('animating');\n      }, 5000); // Pokaż wniosek przez 5 sekund\n      return () => clearTimeout(timer);\n    }\n  }, [step]);\n\n  return (\n    <div className=\"perspective-screen\">\n      \n      {step === 'inputNegative' && (\n        <form onSubmit={handleNegativeSubmit} className=\"thought-form\">\n          <label>Jaka myśl Ci teraz ciąży?</label>\n          <textarea \n            value={input} \n            onChange={(e) => setInput(e.target.value)} \n            placeholder=\"Wpisz tutaj swoją myśl...\"\n            autoFocus \n          />\n          <button type=\"submit\" disabled={isLoading || !input.trim()}>\n            {isLoading ? 'Analizuję...' : 'Dalej'}\n          </button>\n        </form>\n      )}\n\n      {step === 'inputPositive' && (\n        <>\n          <div className=\"glass-sphere\">{negativeThought}</div>\n          <form onSubmit={handlePositiveSubmit} className=\"thought-form\">\n            <label>{reframingQuestion}</label>\n            <textarea \n              value={input} \n              onChange={(e) => setInput(e.target.value)} \n              placeholder=\"Wpisz nową, bardziej pomocną myśl...\"\n              autoFocus \n            />\n            <button type=\"submit\" disabled={isLoading || !input.trim()}>Przeformułuj</button>\n          </form>\n        </>\n      )}\n      \n      {step === 'showConclusion' && (\n        <div className=\"ai-conclusion\">\n          <p>\"{aiConclusion}\"</p>\n        </div>\n      )}\n\n      {step === 'animating' && (\n        <>\n          <ShatterAnimation text={negativeThought} />\n          <div className=\"positive-thought-reveal\">{positiveThought}</div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default PerspectiveShiftScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}